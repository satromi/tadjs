# プラグイン追加ガイド

BTRON Desktopでは、プラグインを追加することで機能を拡張できます。

## プラグインの追加方法

### 手順

1. **プラグインフォルダを配置**
   `plugins/` ディレクトリに新しいプラグインフォルダを配置します。

2. **アプリケーションを再起動**
   BTRON Desktopを再起動すると、自動的に新しいプラグインが認識されます。

それだけです！`plugins/` ディレクトリ内のすべてのフォルダが自動的にスキャンされ、プラグインとして読み込まれます。

## プラグインの無効化

プラグインを無効にしたい場合は、以下のいずれかの方法を使用してください：

- **フォルダ名の先頭にアンダースコアを追加**
  例: `my-plugin` → `_my-plugin`

- **フォルダを plugins ディレクトリの外に移動**

## プラグインの構造

プラグインフォルダには最低限以下のファイルが必要です：

```
plugins/
└── my-plugin/                # プラグインフォルダ
    ├── plugin.json           # プラグイン設定（必須）
    ├── index.html            # メインHTML（必須）
    ├── style.css             # スタイル（任意）
    └── script.js             # スクリプト（任意）
```

### plugin.json の例

```json
{
  "id": "my-plugin",
  "name": "マイプラグイン",
  "version": "1.0.0",
  "type": "accessory",
  "description": "カスタムプラグインの説明",
  "icon": "🔧",
  "main": "index.html",
  "window": {
    "width": 600,
    "height": 400,
    "resizable": true,
    "scrollable": true
  },
  "permissions": [
    "file-read",
    "file-write"
  ]
}
```

### 必須項目

- **id**: プラグインの一意な識別子（通常はフォルダ名と同じ）
- **name**: プラグインの表示名
- **version**: バージョン番号
- **main**: メインとなるHTMLファイル（デフォルトは `index.html`）

### プラグインタイプ

- `base` - 原紙タイプ（原紙箱に表示される）
- `accessory` - 小物タイプ（アクセサリメニューから起動）
- `viewer` - ビューアタイプ
- `utility` - ユーティリティタイプ
- `genko` - 原稿タイプ

## 配布パッケージへの追加

配布版（`dist/BTRON Desktop-win32-x64/`）にプラグインを追加する場合：

```
dist/BTRON Desktop-win32-x64/
└── resources/
    └── app/
        └── plugins/
            ├── basic-text-editor/
            ├── virtual-object-list/
            └── my-new-plugin/  ← ここに配置
```

配置後、アプリケーションを再起動すれば自動的に認識されます。

## トラブルシューティング

### プラグインが表示されない

1. プラグインフォルダが `plugins/` ディレクトリ直下にあるか確認
2. `plugin.json` ファイルが存在し、正しいJSON形式か確認
3. プラグインフォルダ名と `plugin.json` の `id` が一致しているか確認
4. アプリケーションを再起動したか確認

### エラーが発生する

開発者ツール（Ctrl+Shift+I）を開いてコンソールを確認してください。プラグイン読み込み時のエラーメッセージが表示されます。

### プラグインが起動しない

- `plugin.json` の `main` で指定されたHTMLファイルが存在するか確認
- HTMLファイルのパスが正しいか確認
- コンソールにエラーが出ていないか確認

---

**注意:** プラグインの詳細な開発方法については、別途開発者向けドキュメントを参照してください。
